<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MediBot AI – Business Architecture</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f7fb;
      margin: 0;
      padding: 24px;
      color: #222;
    }

    h1 {
      text-align: center;
      margin-bottom: 4px;
    }

    h2 {
      text-align: center;
      margin-top: 0;
      font-size: 16px;
      font-weight: 500;
      color: #555;
    }

    .diagram-container {
      max-width: 1100px;
      margin: 24px auto;
      padding: 24px;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
    }

    .row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 24px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }

    .column {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .box {
      min-width: 190px;
      max-width: 260px;
      padding: 12px 16px;
      background: #ffffff;
      border-radius: 12px;
      border: 1px solid #d0d7e2;
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.05);
      font-size: 13px;
    }

    .box-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 13px;
    }

    .box-subtitle {
      font-size: 11px;
      color: #666;
      margin-bottom: 8px;
    }

    .box-list {
      font-size: 11px;
      margin: 0;
      padding-left: 18px;
      color: #444;
    }

    .box-list li {
      margin-bottom: 2px;
    }

    .box.highlight {
      background: #f0f4ff;
      border-color: #93b4ff;
    }

    .box.external {
      background: #fdf8f3;
      border-color: #f2b28b;
    }

    .arrow-down, .arrow-right {
      display: flex;
      justify-content: center;
      align-items: center;
      color: #777;
      font-size: 11px;
    }

    .arrow-down::before {
      content: "▼";
      margin-right: 4px;
    }

    .arrow-right::before {
      content: "▶";
      margin-right: 4px;
    }

    .section-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #888;
      margin-bottom: 4px;
    }

    .legend {
      margin-top: 16px;
      font-size: 11px;
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .legend-swatch {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      border: 1px solid #d0d7e2;
    }

    .legend-swatch.app { background: #f0f4ff; border-color: #93b4ff; }
    .legend-swatch.ext { background: #fdf8f3; border-color: #f2b28b; }
  </style>
</head>
<body>
  <h1>DermaCare AI</h1>
  <h2>Business Architecture View</h2>

  <div class="diagram-container">
    <!-- Row 1: User -->
    <div class="row">
      <div class="column">
        <div class="section-label">Channel</div>
        <div class="box">
          <div class="box-title">Patient / User</div>
          <div class="box-subtitle">Web Browser (Desktop / Mobile)</div>
          <ul class="box-list">
            <li>Accesses DermaCare via URL</li>
            <li>Logs in and manages consultations</li>
            <li>Describes symptoms and uploads skin images</li>
          </ul>
        </div>
      </div>

      <div class="arrow-right">HTTPS</div>

      <div class="column">
        <div class="section-label">Digital Front Door</div>
        <div class="box highlight">
          <div class="box-title">DermaCare AI Web App</div>
          <div class="box-subtitle">Streamlit Frontend + Backend</div>
          <ul class="box-list">
            <li>Guided onboarding (name, age, skin type, concern)</li>
            <li>Chat-style consultation experience</li>
            <li>Captures images and questions for analysis</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Row 2: Inside App -->
    <div class="row">
      <div class="column">
        <div class="section-label">Application Services</div>
        <div class="box">
          <div class="box-title">Authentication & User Profile</div>
          <div class="box-subtitle">login.py + user_db.json</div>
          <ul class="box-list">
            <li>Simple credential-based login</li>
            <li>Stores demo users and names</li>
            <li>Controls access to consultations</li>
          </ul>
        </div>
      </div>

      <div class="column">
        <div class="box">
          <div class="box-title">Consultation & Session Manager</div>
          <div class="box-subtitle">utils.py + consultations.py</div>
          <ul class="box-list">
            <li>Creates and selects consultations</li>
            <li>Maintains chat history per patient</li>
            <li>Tracks onboarding step & patient profile</li>
          </ul>
        </div>

        <div class="arrow-down">Onboarding complete</div>

        <div class="box">
          <div class="box-title">Onboarding Flow</div>
          <div class="box-subtitle">onboarding.py</div>
          <ul class="box-list">
            <li>Collects name, age, skin type, issue type</li>
            <li>Normalizes basic profile info</li>
            <li>Ensures context for later advice</li>
          </ul>
        </div>
      </div>

      <div class="column">
        <div class="box">
          <div class="box-title">Image Analysis Service</div>
          <div class="box-subtitle">detector.py (CLIP)</div>
          <ul class="box-list">
            <li>Converts uploaded photo to a visual embedding</li>
            <li>Compares against predefined “skin appearance” texts</li>
            <li>Returns top visual impressions (ranked)</li>
          </ul>
        </div>

        <div class="box">
          <div class="box-title">LLM Orchestrator</div>
          <div class="box-subtitle">llm.py (Groq client)</div>
          <ul class="box-list">
            <li>Combines predictions + chat history + profile</li>
            <li>Calls LLM to generate simple, friendly guidance</li>
            <li>Post-processes response for safe display</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Row 3: External Services -->
    <div class="row">
      <div class="column">
        <div class="section-label">Runtime State</div>
        <div class="box">
          <div class="box-title">In-Memory Session State</div>
          <div class="box-subtitle">streamlit.session_state</div>
          <ul class="box-list">
            <li>Current user’s consultations & messages</li>
            <li>Onboarding status and patient attributes</li>
            <li>Cached CLIP model to avoid reloads</li>
          </ul>
        </div>
      </div>

      <div class="column">
        <div class="section-label">External Intelligence</div>
        <div class="box external">
          <div class="box-title">CLIP Model Weights</div>
          <div class="box-subtitle">Hugging Face / Model Hub</div>
          <ul class="box-list">
            <li>Pretrained vision–language model</li>
            <li>Enables zero-shot “what does this skin look like?”</li>
          </ul>
        </div>

        <div class="box external">
          <div class="box-title">Groq LLM API</div>
          <div class="box-subtitle">meta-llama/llama-4-scout-17b-16e-instruct</div>
          <ul class="box-list">
            <li>Receives structured payload from DermaCare</li>
            <li>Generates short, non-diagnostic skin guidance</li>
            <li>Returns answer to be shown in chat</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Legend -->
    <div class="legend">
      <div class="legend-item">
        <span class="legend-swatch app"></span>
        <span>Core DermaCare application components</span>
      </div>
      <div class="legend-item">
        <span class="legend-swatch ext"></span>
        <span>External AI / model services</span>
      </div>
    </div>
  </div>
</body>
</html>
